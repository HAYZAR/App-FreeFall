<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Caída Libre</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      background: linear-gradient(135deg, #e0e7ff 0%, #f1f5f9 100%);
      min-height: 100vh;
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      display: flex; justify-content: center; align-items: center;
    }
    .container {
      background: #fff;
      border-radius: 1.2rem;
      box-shadow: 0 6px 32px 0 rgba(60,60,90,0.11);
      max-width: 430px;
      padding: 2.2rem 2rem 2rem 2rem;
      width: 100%;
    }
    h2 {
      margin-top: 0; margin-bottom: .3em;
      color: #3b3b5c; text-align: center; font-weight: 600;
      letter-spacing: 0.04em;
    }
    .instructions {
      font-size: .97em;
      color: #555;
      background: #f3f6fb;
      border-radius: .6rem;
      padding: .8em 1em;
      margin-bottom: 1.5em;
      text-align: center;
    }
    label { font-weight: 500; color: #374151; display: block; margin-bottom: .5em;}
    select, input[type="number"], input[type="text"] {
      width: 100%;
      border: 1.5px solid #c7d2fe;
      border-radius: .6rem;
      padding: .7em;
      margin-bottom: 1em;
      font-size: 1em;
      background: #f8fafc;
      transition: border 0.2s;
    }
    select:focus, input:focus { border: 2px solid #6366f1; }
    .readonly-box {
      background: #e0f2fe;
      color: #2563eb;
      border-radius: .6rem;
      padding: .7em;
      margin-bottom: 1em;
      font-size: 1em;
      font-weight: 500;
      border: 1.5px solid #90cdf4;
    }
    button {
      width: 100%;
      background: linear-gradient(90deg, #6366f1 50%, #60a5fa 100%);
      color: #fff;
      border: none; border-radius: .6rem;
      padding: .85em;
      font-size: 1.13em;
      font-weight: 600;
      cursor: pointer;
      transition: background .2s, transform .1s;
      margin-top: .2em;
    }
    button:hover { background: linear-gradient(90deg, #818cf8 40%, #38bdf8 100%); transform: scale(1.03);}
    .result { background: #e0fce8; color: #134e20; border-radius: .5rem; margin-bottom: 1em; padding: .7em 1em; }
    #respuesta { text-align: center; margin-top: 1.1em; font-size: 1.06em; color: #059669; min-height: 2em; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Simulador de Caída Libre</h2>
    <div class="instructions">
      Selecciona qué deseas calcular y completa los campos.<br>
      El resultado aparecerá automáticamente.<br>
      <span style="color:#2563eb; font-size:0.98em;">
        (Se asume gravedad estándar: <b>g = 9.8 m/s²</b>)
      </span>
    </div>
    <form id="freeFallForm" autocomplete="off">
      <label>Nombre:
        <input name="nombre" placeholder="Tu nombre completo" required>
      </label>
      <label>¿Qué deseas calcular?
        <select id="calculo" name="calculo">
          <option value="desplazamiento">Desplazamiento</option>
          <option value="velocidad">Velocidad final</option>
        </select>
      </label>
      <div id="campos-desplazamiento">
        <label>Tiempo de caída (s):
          <input type="number" name="tiempo" id="tiempo" min="0" max="5" step="0.1" value="0" required>
        </label>
        <label>Velocidad inicial (m/s):
          <input type="number" name="velocidad_inicial" id="velocidad_inicial" min="-30" max="30" step="0.5" value="0" required>
        </label>
        <div class="readonly-box">
          g = 9.8 m/s² (gravedad fija)
        </div>
      </div>
      <div id="campos-velocidad" style="display:none;">
        <label>Desplazamiento (m):
          <select name="desplazamiento" id="desplazamiento"></select>
        </label>
        <label>Tiempo de caída (s):
          <input type="number" name="tiempo2" id="tiempo2" min="0" max="5" step="0.1" value="0" required>
        </label>
        <label>Velocidad inicial (m/s):
          <input type="number" name="velocidad_inicial2" id="velocidad_inicial2" min="-30" max="30" step="0.5" value="0" required>
        </label>
        <div class="readonly-box">
          g = 9.8 m/s² (gravedad fija)
        </div>
      </div>
      <div id="resultado" class="result" style="display:none;"></div>
      <button type="submit">Enviar datos</button>
    </form>
    <div id="respuesta"></div>
  </div>
  <script>
  document.addEventListener("DOMContentLoaded", function() {
    // Opciones de desplazamiento (0 a 100 m en pasos de 5)
    const selDespl = document.getElementById('desplazamiento');
    if(selDespl){
      for(let x = 0; x <= 100; x += 5){
        selDespl.innerHTML += `<option value="${x}">${x} m</option>`;
      }
    }
    // Cambio de modo de cálculo
    const calcSel = document.getElementById('calculo');
    if(calcSel){
      calcSel.addEventListener('change', function(){
        if(this.value === 'desplazamiento'){
          document.getElementById('campos-desplazamiento').style.display = '';
          document.getElementById('campos-velocidad').style.display = 'none';
        } else {
          document.getElementById('campos-desplazamiento').style.display = 'none';
          document.getElementById('campos-velocidad').style.display = '';
        }
        mostrarResultado();
      });
    }
    // Cálculo y visualización automática
    function mostrarResultado(){
      const modo = document.getElementById('calculo').value;
      let resTxt = "";
      const g = 9.8;
      if(modo === 'desplazamiento'){
        const v0 = parseFloat(document.getElementById('velocidad_inicial').value);
        const t = parseFloat(document.getElementById('tiempo').value);
        if(isNaN(v0) || isNaN(t)){
          resTxt = "";
        } else {
          const dx = v0 * t + 0.5 * g * t * t;
          resTxt = `Desplazamiento: <b>${dx.toFixed(2)} m</b>`;
        }
      } else {
        const v0 = parseFloat(document.getElementById('velocidad_inicial2').value);
        const t = parseFloat(document.getElementById('tiempo2').value);
        if(isNaN(v0) || isNaN(t)){
          resTxt = "";
        } else {
          const v = v0 + g * t;
          resTxt = `Velocidad final: <b>${v.toFixed(2)} m/s</b>`;
        }
      }
      const div = document.getElementById('resultado');
      if(resTxt){
        div.innerHTML = resTxt;
        div.style.display = "block";
      } else {
        div.style.display = "none";
      }
    }
    [
      'tiempo','velocidad_inicial',
      'desplazamiento','tiempo2','velocidad_inicial2','calculo'
    ].forEach(id=>{
      const elem = document.getElementById(id);
      if(elem){
        elem.addEventListener('input', mostrarResultado);
        elem.addEventListener('change', mostrarResultado);
      }
    });
    mostrarResultado();
    // Envío de formulario
    document.getElementById('freeFallForm').onsubmit = function(e){
      e.preventDefault();
      const modo = document.getElementById('calculo').value;
      const g = 9.8;
      let resultado;
      if(modo === 'desplazamiento'){
        const v0 = parseFloat(document.getElementById('velocidad_inicial').value);
        const t = parseFloat(document.getElementById('tiempo').value);
        resultado = v0 * t + 0.5 * g * t * t;
      } else {
        const v0 = parseFloat(document.getElementById('velocidad_inicial2').value);
        const t = parseFloat(document.getElementById('tiempo2').value);
        resultado = v0 + g * t;
      }
      const datos = {
        nombre: this.nombre.value,
        calculo: modo,
        tiempo: this.tiempo ? this.tiempo.value : this.tiempo2.value,
        velocidad_inicial: this.velocidad_inicial ? this.velocidad_inicial.value : this.velocidad_inicial2.value,
        desplazamiento: this.desplazamiento ? this.desplazamiento.value : '',
        resultado: resultado
      };
      fetch('https://script.google.com/macros/s/AKfycbyvjZ9v5y0dBMNkFJbMPcvMTl4QTZa3PT6jtmBLgRbELV56ytWA_RAfcDW-6kH1oA3sIg/exec', { // ← Pega aquí tu URL de Apps Script
        method: 'POST',
        body: JSON.stringify(datos),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(r => r.text())
      .then(txt => {
        document.getElementById('respuesta').innerHTML = 
          txt == 'OK' ? "¡Enviado correctamente! ✅" : "Error al enviar: " + txt;
        if (txt == 'OK') this.reset();
      }.bind(this));
    };
  });
  </script>
</body>
</html>
